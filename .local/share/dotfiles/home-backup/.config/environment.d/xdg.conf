# environment.d(5) configuration snippet for setting environment variables for
# the XDG base directory specification:
#
#   https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html
#
# There is a little chicken-or-egg issue here: systemd-environment-d-generator
# reads these files from ${XDG_CONFIG_HOME:~/.config}/environment.d, whereas we
# don't set XDG_CONFIG_HOME until here.
#
# The following work-arounds (in descending priority) are:
#
#  0. If the system administrator is kind enough, set XDG_CONFIG_HOME at some
#     system-wide location (ideally only for our user).
#  1. If a config in /etc/pam.d/ loads pam_env.so with user_readenv=1, we use
#     ~/.pam_environment to define XDG_CONFIG_HOME. Note that this is no longer
#     the default (and future versions pam_env.so may even drop support for
#     ~/.pam_environment entirely), so this approach will stop working at some
#     point.
#  2. Create a compatibility symlink at ~/.config/environment.d or ~/.config.
#
# Written by ayekat on a cold Friday afternoon in April 2021. These variables
# were previously defined in ~/.pam_environment, but moved here to prepare for
# the upcoming support drop of ~/.pam_environment in upstream PAM.


# XDG basedir spec paths (XDG_{LIB,LOG}_HOME are non-standard!)
XDG_CACHE_HOME="$HOME/.cache"
XDG_CONFIG_HOME="$HOME/.config"
XDG_DATA_HOME="$HOME/.local/share"
XDG_CONFIG_DIRS="/etc/xdg"
XDG_DATA_DIRS="$XDG_DATA_HOME:/usr/share:/usr/local/share"
XDG_LOG_HOME="$HOME/.local/var/log"

# Fix various applications to respect the XDG basedir spec:
CARGO_HOME="$XDG_DATA_HOME/cargo"
GNUPGHOME="$XDG_DATA_HOME/gnupg"
GTK2_RC_FILES="$XDG_CONFIG_HOME/gtk-2.0/gtkrc-2.0"
NPM_CONFIG_USERCONFIG="$XDG_CONFIG_HOME/npm/npmrc"
PASSWORD_STORE_DIR="$XDG_DATA_HOME"/password-store
PGPPATH="$GNUPGHOME"
XINITRC="$XDG_CONFIG_HOME/X11/xinitrc"
ZDOTDIR="$XDG_CONFIG_HOME/zsh"
